<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <title>Document</title>
</head>

<body>
  <div class="card-box">
    <div id="character-level">
      <div><strong>角色</strong>职业： 弓箭手</div>
      <div>当前等级：<span>1</span>级</div>
    </div>
    <div id="character-account">
      <input type="text" placeholder="角色昵称" />
      <input type="text" placeholder="账号邮箱" />
      <input type="text" placeholder="账号密码" />
      <input type="text" placeholder="辅助邮箱" />
    </div>
    <div id="gameMode">
      <label>新手：<input type="checkbox" name="isBeginner" /></label>
      <div>
        <label>主线<input type="radio" name="gameMode" value="mainStory" checked="true" /></label>

        <label>副本<input type="radio" name="gameMode" value="instance" /></label>

        <label>委托<input type="radio" name="gameMode" value="delegate" /></label>
      </div>

    </div>
  </div>
  <div class="card-box">
    <div id="normal-instanceZone" class="select-menu">
      <div class="select">
        <span>普通副本：</span>
        <div class="arrow-box">
          <img class="arrow" src="../img/svg/down_arrow.svg" alt="选择" />
          <img class="arrow arrow-hidden" src="../img/svg/up_arrow.svg" alt="选择" />
        </div>
      </div>
      <div class="option-list">
        <div class="option"><label><input type="checkbox" />远古迷宫</label>
          <div><button class="plus">+</button><span>1</span><button class="subtract">-</button></div>
          <div><span>1</span>级</div>
        </div>
        <div class="option"><label><input type="checkbox" />地下墓穴</label>
          <div><button class="plus">+</button><span>1</span><button class="subtract">-</button></div>
          <div><span>28</span>级</div>
        </div>
        <div class="option"><label><input type="checkbox" />迪贝格</label>
          <div><button class="plus">+</button><span>1</span><button class="subtract">-</button></div>
          <div><span>50</span>级</div>
        </div>
        <div class="option"><label><input type="checkbox" />沙漠洞穴</label>
          <div><button class="plus">+</button><span>1</span><button class="subtract">-</button></div>
          <div><span>67</span>级</div>
        </div>
        <div class="option"><label><input type="checkbox" />地下神殿</label>
          <div><button class="plus">+</button><span>1</span><button class="subtract">-</button></div>
          <div>无</div>
        </div>
      </div>
    </div>

    <div id="special-instanceZone" class="select-menu">
      <div class="select">
        <span>特殊：</span>
        <div class="arrow-box">
          <img class="arrow" src="../img/svg/down_arrow.svg" alt="选择" />
          <img class="arrow arrow-hidden" src="../img/svg/up_arrow.svg" alt="选择" />
        </div>
      </div>
      <div class="option-list">
        <div class="option"><input type="checkbox" id="special_01" /><label for="special_01"><span>精灵的矿山</span></label>
        </div>
        <div class="option"><input type="checkbox" id="special_02" /><label for="special_02"><span>幻影遗迹</span></label>
        </div>
        <div class="option"><input type="checkbox" id="special_03" /><label for="special_03"><span>时间迷宫</span></label>
        </div>
        <div class="option"><input type="checkbox" id="special_04" /><label for="special_04"><span>寒冰神殿</span></label>
        </div>
        <div class="option"><input type="checkbox" id="special_05" /><label for="special_05"><span>混沌城堡</span></label>
        </div>
        <div class="option"><input type="checkbox" id="special_06" /><label for="special_06"><span>精灵城堡</span></label>
        </div>
      </div>
    </div>

  </div>
  <div>
    <button id="startBtn">Start</button>
  </div>
  <script>
    const ui = {
      gameMode: "mainStory",
      isBeginner: false,
      normalZone: [
        { checked: false, time: 1, level: 1 },
        { checked: false, time: 1, level: 1 },
        { checked: false, time: 1, level: 1 },
        { checked: false, time: 1, level: 1 },
        { checked: false, time: 1, level: 1 },
      ]
    };
    const selects = document.querySelectorAll(".select-menu");
    const options = document.querySelectorAll("#normal-instanceZone .option");
    const startBtn = document.querySelector("#startBtn");
    const beginnerCheckBox = document.querySelector("input[name=isBeginner]");

    //单选框点击事件
    document.querySelectorAll("input[name= gameMode]").forEach((radio) =>
    {
      radio.addEventListener("click", () =>
      {
        ui.gameMode = radio.value;
      });
    });
    //新手复选框
    beginnerCheckBox.addEventListener("click", () =>
    {
      ui.isBeginner = beginnerCheckBox.checked;
    });
    //下拉菜单显示与隐藏
    selects.forEach((select) =>
    {
      select.querySelector(".select").addEventListener("click", () =>
      {
        select.querySelector(".option-list").classList.toggle("active");
        select
          .querySelectorAll(".arrow")
          .forEach((arrow) => arrow.classList.toggle("arrow-hidden"));
      });
    });


    //选项的点击事件
    options.forEach((option, index) =>
    {
      let time = option.querySelector("span:first-of-type");
      let input = option.querySelector("input");
      input.addEventListener("click", () =>
      {
        ui.normalZone[index].checked = input.checked;
        console.log(ui.normalZone[index]);
      });
      let plus = option.querySelector(".plus");
      plus.addEventListener("click", () =>
      {
        let addTime = parseInt(time.innerText);
        addTime++;
        time.innerText = addTime;
        ui.normalZone[index].time = addTime;
      });
      let subtract = option.querySelector(".subtract");
      subtract.addEventListener("click", () =>
      {
        let subTime = parseInt(time.innerText);
        if (subTime == 1)
        {
          subTime = 1;
        }
        else subTime--;
        time.innerText = subTime;
        ui.normalZone[index].time = subTime;
      });

    });

    //开始按钮点击事件
    startBtn.addEventListener("click", () =>
    {
      $autox.callHandler("StartScript", JSON.stringify(ui), (callBackData) =>
      {
        startBtn.innerHTML = "Stop";
        startBtn.style.cssText = "background: red";
        console.log(callBackData);
      });

    });

    document.addEventListener("AutoxJsBridgeReady", () =>
    {
      //$autox.
      console.log("AutoxJsBridegReady");
    });
  </script>
</body>

</html>